---
layout: home
---

<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>

    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
{% include header.html %}
<div class="map">
    {% assign total_lat = 0 %}
    {% assign total_lon = 0 %}
    {% assign total_points = 0 %}

    {% for place in site.spots %}
        {% assign total_lon = total_lon | plus: place.position[0] %}
        {% assign total_lat = total_lat | plus: place.position[1] %}
        {% assign total_points = total_points | plus: 1 %}
    {% endfor %}

    {% assign center_lat = total_lat | divided_by: total_points %}
    {% assign center_lon = total_lon | divided_by: total_points %}

    {% leaflet_map { "center": [{{ center_lat }}, {{ center_lon }}], "needsLayers": true } %}
    {% for place in site.spots %}
        {% for collect in place.collections %}
            {% leaflet_geojson {
                "type": "Feature",
                    "properties": {
                    "popupContent": "{{ place.title }}",
                    "href": "{{ place.url }}",
                    "pane": "{{ collect }}"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": {{ place.position }}
                }
            } %}
        {% endfor %}
    {% endfor %}
    {% endleaflet_map %}
</div>
</body>
</html>
